version: '3.8'

# Claude Code UI - Simple 3-variable configuration
# Everything else is fixed in the image

services:
  claude-code-ui:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: claude-code-ui
    env_file:
      - .env.docker
    ports:
      - "3000:3000"
    environment:
      # Only 2 runtime variables needed (from .env.docker)
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - ANTHROPIC_BASE_URL=${ANTHROPIC_BASE_URL:-https://api.anthropic.com}
    volumes:
      # Claude config and sessions
      - claude-data:/opt/claude-config
      # Project directory (3rd variable from .env.docker)
      - ${PROJECT_PATH:-.}:/project
      # Optional: SSH and Git config
      - ~/.ssh:/home/node/.ssh:ro
      - ~/.gitconfig:/home/node/.gitconfig:ro
    restart: unless-stopped
    networks:
      - claude-network

volumes:
  claude-data:
    driver: local

networks:
  claude-network:
    driver: bridge
